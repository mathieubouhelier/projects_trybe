(this["webpackJsonpsd-01-week16-react-redux-starwars-datatable-filters"]=this["webpackJsonpsd-01-week16-react-redux-starwars-datatable-filters"]||[]).push([[0],{20:function(e,t,a){e.exports=a(35)},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),i=a.n(l),c=a(7),u=(a(31),a(32),a(4)),o=a(5),s=a(8),m=a(6),d=a(1),f=a(9),p=["name","climate","diameter","gravity","orbital_period","population","rotation_period","surface_water","terrain","url"],b=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.filteredPlanet;return r.a.createElement("div",null,r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-striped table-responsive"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,p.map((function(e){return r.a.createElement("th",{scope:"col",key:e},e)})))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement("tr",{key:e.name},p.map((function(t){return r.a.createElement("td",null,e[t])})))}))))))}}]),t}(r.a.Component);b.defaultProps={filteredPlanet:null};var v=b,h=function(){return fetch("".concat("https://swapi-trybe.herokuapp.com/api/planets/")).then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))};var E=function(e){return{type:"NUMERICAL_FILTER",value:e}},y=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.value;return r.a.createElement("input",{"data-testid":"name-filter",className:"form-control col-12",placeholder:"Search a Planet",onChange:function(t){return e.props.searchBar(t.target.value)},value:t})}}]),t}(r.a.Component);y.defaultProps={value:null};var j=Object(c.b)((function(e){return{value:e.filters.value}}),(function(e){return{searchBar:function(t){return e({type:"SEARCH_BAR",value:t})},numericalFilter:function(t){return e(E(t))}}}))(y),O=a(11),N=a(2),R=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={filterByNumericValues:{column:"",comparison:"",value:""},comparisonItems:["Compara\xe7\xe3o","maior que","igual a","menor que"]},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.columnRender=a.columnRender.bind(Object(d.a)(a)),a.filterRender=a.filterRender.bind(Object(d.a)(a)),a.buttonRender=a.buttonRender.bind(Object(d.a)(a)),a.comparisonRender=a.comparisonRender.bind(Object(d.a)(a)),a}return Object(f.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState({filterByNumericValues:Object(N.a)({},this.state.filterByNumericValues,Object(O.a)({},a,n))})}},{key:"columnRender",value:function(){var e=[];this.props.filterByNumericValues.forEach((function(t){e.push(t.column)}));var t=[];return t=["Coluna","population","orbital_period","diameter","rotation_period","surface_water"].filter((function(t){return!e.includes(t)})),r.a.createElement("select",{name:"column",className:"form-control col-md-5 mr-3 mb-2","data-testid":"column-filter",value:this.state.value,onChange:this.handleChange},t.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))}},{key:"filterRender",value:function(){var e=this;return r.a.createElement("div",{className:"filterListContainer"},this.props.filterByNumericValues.map((function(t,a){return r.a.createElement("div",{"data-testid":"filter",className:"filterList"},r.a.createElement("div",null,t.column," ",t.comparison," ",t.value),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-danger button-delete",onClick:function(){return e.props.deleteFilter(a)}},"X")))})))}},{key:"buttonRender",value:function(){var e=this;return r.a.createElement("button",{type:"button",className:"btn btn-primary","data-testid":"button-filter",onClick:function(){return e.props.numericalFilter(e.state.filterByNumericValues)}},"Filter")}},{key:"comparisonRender",value:function(){return r.a.createElement("select",{name:"comparison",className:"form-control col-md-5 mb-2","data-testid":"comparison-filter",value:this.state.comparison,onChange:this.handleChange},this.state.comparisonItems.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))}},{key:"render",value:function(){return r.a.createElement("div",{className:"filters"},r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-row"},r.a.createElement(this.columnRender,null),r.a.createElement(this.comparisonRender,null))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-row"},r.a.createElement("input",{name:"value",type:"number",className:"form-control col-md-8 mr-1","data-testid":"value-filter",value:this.state.value,onChange:this.handleChange}),r.a.createElement(this.buttonRender,null))))),r.a.createElement("div",{className:"filterListMain"},r.a.createElement(this.filterRender,null)))}}]),t}(r.a.Component),g=Object(c.b)((function(e){return{filterByNumericValues:e.filters.filterByNumericValues}}),(function(e){return{numericalFilter:function(t){return e(E(t))},deleteFilter:function(t){return e({type:"DELETE_FILTER",index:t})}}}))(R),C=(a(33),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).compare=a.compare.bind(Object(d.a)(a)),a.planetFilter=a.planetFilter.bind(Object(d.a)(a)),a}return Object(f.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getPlanet)()}},{key:"compare",value:function(e,t,a){var n=!1;return"maior que"===a&&(n=e>t),"menor que"===a&&(n=e<t),"igual a"===a&&(n=e===t),this.bar=n,n}},{key:"planetFilter",value:function(){var e=this,t=this.props,a=t.data,n=t.filters,r=t.searchedPlanet,l=n.filterByNumericValues,i=a.filter((function(e){return e.name.includes(r)}));return l.map((function(t){return i=i.filter((function(a){return e.compare(Number(a[t.column]),Number(t.value),t.comparison)}))})),i}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.isLoading;return r.a.createElement("div",null,r.a.createElement("div",{className:"filterContainer"},r.a.createElement("div",{className:"searchbar"},r.a.createElement(j,null)),r.a.createElement("div",null,r.a.createElement(g,null))),!a&&r.a.createElement(v,{planets:t,filteredPlanet:this.planetFilter()}))}}]),t}(r.a.Component));C.defaultProps={data:[],filters:null,searchedPlanet:null};var k=Object(c.b)((function(e){return{isLoading:e.planetReducer.isLoading,data:e.planetReducer.data,searchedPlanet:e.filters.filterByName.name,filters:e.filters}}),(function(e){return{getPlanet:function(){return e((function(e){return e({type:"SEARCH_BEGIN",loading:!0}),h().then((function(t){return e(function(e){return{type:"SEARCH_SUCCESS",loading:!1,data:e}}(t.results))}),(function(t){return e(function(e){return{type:"SEARCH_ERROR",loading:!1,error:e}}(t.message))}))}))}}}))(C);a(34);var B=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(k,null))},L=a(3),_=a(17),S=a(18),w={isLoading:!0,data:{}};var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_BEGIN":return Object(N.a)({},e,{isLoading:!0});case"SEARCH_SUCCESS":return Object(N.a)({},e,{isLoading:!1,data:t.data});case"SEARCH_ERROR":return Object(N.a)({},e,{isLoading:!1,error:t.error});default:return e}},P=a(19),V={filterByName:{name:""},filterByNumericValues:[]};var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_BAR":return Object(N.a)({},e,{filterByName:{name:t.value}});case"DELETE_FILTER":return Object(N.a)({},e,{filterByNumericValues:e.filterByNumericValues.filter((function(e,a){return a!==t.index}))});case"NUMERICAL_FILTER":var a=t.value;return Object(N.a)({},e,{filterByNumericValues:[].concat(Object(P.a)(e.filterByNumericValues),[{column:a.column,comparison:a.comparison,value:a.value}])});default:return e}},I=Object(L.combineReducers)({planetReducer:F,filters:A}),H=Object(L.createStore)(I,Object(_.composeWithDevTools)(Object(L.applyMiddleware)(S.a)));i.a.render(r.a.createElement(c.a,{store:H},r.a.createElement(B,null),","),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.07b67af4.chunk.js.map